<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>简易计算器</title>
    <style type="text/css">
    body {
        background-color: #eee;
    }

    #calculator {
        margin: auto;

    }
    </style>
</head>

<body>
    <!-- 简易计算器 -->
    <div id="calculator">
        <p>
            <input class="formerInput" value="1" type="text"></input>
            <span class="sign">+</span>
            <input class="laterInput" value="1" type="text"></input>
            <span>=</span>
            <span class="resultOutput">2</span>
        </p>
        <p>
            <input type="button" value="+" class="btn" title="add" />
            <input type="button" value="-" class="btn" title="subtract" />
            <input type="button" value="*" class="btn" title="multiply" />
            <input type="button" value="/" class="btn" title="divide" />
        </p>
    </div>
    <script type="text/javascript">
    // 获取元素
    var calculator = document.querySelector('#calculator');
    var formerInput = calculator.querySelector('.formerInput');
    var laterInput = calculator.querySelector('.laterInput');
    var sign = calculator.querySelector('.sign');
    var resultOutput = calculator.querySelector('.resultOutput');


    // 加
    function addHandler() {
        sign.innerHTML = "+";
        resultOutput.innerHTML = +formerInput.value + +laterInput.value;
    }

    // 减
    function subtractHandler() {
        sign.innerHTML = "+";
        resultOutput.innerHTML = formerInput.value - laterInput.value;
    }

    // 乘
    function multiplyHandler() {
        sign.innerHTML = "+";
        resultOutput.innerHTML = formerInput.value * laterInput.value;
    }

    // 除
    function divideHandler() {
        sign.innerHTML = "+";
        resultOutput.innerHTML = formerInput.value / laterInput.value;
    }

    // 第一次改进，将结构和行为分离
    var btns = calculator.querySelectorAll('.btn');
    // 绑定事件
    // +
    btns[0].onclick = addHandler;
    btns[1].onclick = subtractHandler;
    btns[2].onclick = multiplyHandler;
    btns[3].onclick = divideHandler;

    // 第二次改进，使用循环添加事件
    for (var i = 0; i < btns.length; i++) {
        btns[i].onclick = function() {
            switch (this.title) {
                case 'add':
                    addHandler();
                    break;
                case 'subtract':
                    subtractHandler();
                    break;
                case 'multiply':
                    multiplyHandler();
                    break;
                case 'divide':
                    divideHandler();
                    break;
            }
        };
    }

    // 第三次改进 封装函数
    // 绑定事件
    each(btns, function(index, elem) {
        // body
        elem.onclick = function() {
            switch (this.title) {
                case 'add':
                    addHandler();
                    break;
                case 'subtract':
                    subtractHandler();
                    break;
                case 'multiply':
                    multiplyHandler();
                    break;
                case 'divide':
                    divideHandler();
                    break;
            }
        };

    });

    function each(array, fn) {
        for (var i = 0; i < array.length; i++) {
            fn(i, array[i]);
        }
    }

    // 更新符号
    function updateSign(symbol) {
        sign.innerHTML = symbol
    }

    // 加
    function add(num1, num2) {
        return +num1 + +num2
    }

    // 加
    function addHandler() {
        updateSign('+');
        resultOutput.innerHTML = add(formerInput.value, laterInput.value);
    }

    // 减
    function subtract(num1, num2) {
        return +num1 - +num2
    }

    // 减
    function subtractHandler() {
        updateSign('-');
        resultOutput.innerHTML = subtract(formerInput.value, laterInput.value);
    }

    // 乘
    function multiply(num1, num2) {
        return +num1 * +num2
    }

    // 乘
    function multiplyHandler() {
        updateSign('*');
        resultOutput.innerHTML = multiply(formerInput.value, laterInput.value);
    }

    // 除
    function divide(num1, num2) {
        return +num1 / +num2
    }

    // 除
    function divideHandler() {
        updateSign('/');
        resultOutput.innerHTML = divide(formerInput.value, laterInput.value);
    }

    // 第四次修改，管理代码
    var wrapElem = document.querySelector('#calculator');
    var calculatorElem = {
        formerInput: wrapElem.querySelector('.formerInput'),
        laterInput: wrapElem.querySelector('.laterInput'),
        sign: wrapElem.querySelector('.sign'),
        resultOutput: wrapElem.querySelector('.resultOutput'),
        btns: wrapElem.querySelectorAll('.btn'),
    }

    // 把小函数分组织
    var operation = {
        // 加
        add: function(num1, num2) {
            return +num1 + +num2
        },
        subtract: function(num1, num2) {
            return +num1 - +num2
        },
        multiply: function(num1, num2) {
            return +num1 * +num2
        },
        divide: function(num1, num2) {
            return +num1 / +num2
        }

    }
    // 然后把使用到的地方的变量修改即可
    </script>
</body>

</html>